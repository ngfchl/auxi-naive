import{i as U,f as P,b as D}from"./index-4820bc59.js";import{d as T,$ as B,r as l,f as F,H as M,I as N,U as u,S as m,N as s,M as E,c as I,F as Q}from"./vue-95e91526.js";import{S as R,E as V,F as $,an as j}from"./naiveUI-7723b9a5.js";import"./lodash-00189e46.js";import"./ionicons5-12752ee5.js";const H=T({__name:"index",setup(J){const{isMobile:r,isPad:K,isDesktop:W}=U(),_=P(),{torrentList:p,torrentColumns:v}=B(_),{getTorrentList:w,getSiteList:f,handleUpdateSorter:h,getDownloaderList:S}=_,o=l(!1),g=l([]),t=l(""),a=l({page:1,pageSize:r.value?20:33,size:"small",showQuickJumper:!0,itemCount:0,showSizePicker:!0,pageSizes:[10,20,25,30,33,40,100],pageSlot:9,simple:r.value,prefix({itemCount:e}){return`共 ${e}.`}}),d=async()=>{g.value=p.value.items.filter(e=>e.title.toLowerCase().includes(t.value.toLowerCase())||e.subtitle.toLowerCase().includes(t.value.toLowerCase())||e.category.toLowerCase().includes(t.value.toLowerCase())||e.area.toLowerCase().includes(t.value.toLowerCase())||e.sale_status.toLowerCase().includes(t.value.toLowerCase()))},n=async(e,i)=>{o.value=!0,await w(e,i),a.value.page=p.value.per_page,a.value.itemCount=p.value.total,await d(),o.value=!1},C=async e=>{a.value.pageSize=e,await n(a.value.page,a.value.pageSize)},y=async e=>{await n(e,a.value.pageSize)},L=async()=>{await n(a.value.page,a.value.pageSize)};return F(async()=>{o.value=!0,await f(),await S(),await n(a.value.page,a.value.pageSize),o.value=!1}),(e,i)=>{const z=R,x=V,b=$,k=j;return M(),N(Q,null,[u(b,{class:"pt-2 mb-1",justify:"start"},{default:m(()=>[u(z,{value:s(t),"onUpdate:value":[i[0]||(i[0]=c=>E(t)?t.value=c:null),d],size:"small"},null,8,["value"]),u(x,{size:"small",type:"warning",onClick:L},{default:m(()=>[I(" 刷新 ")]),_:1})]),_:1}),u(k,{columns:s(v),data:s(g),loading:s(o),"min-height":s(r)?520:740,"paginate-single-page":!0,pagination:s(a),"row-key":c=>c.hash_string,bordered:"","flex-height":"","max-height":"900",remote:"",size:"small",striped:"","onUpdate:pageSize":C,"onUpdate:page":y,"onUpdate:sorter":s(h)},null,8,["columns","data","loading","min-height","pagination","row-key","onUpdate:sorter"])],64)}}});const Y=D(H,[["__scopeId","data-v-a877a8e3"]]);export{Y as default};
